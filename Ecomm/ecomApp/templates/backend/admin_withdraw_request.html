 {% include 'backend/header.html' %}
   {% include 'backend/sidebar.html' %}


 {% load static %}
  <!-- Content Wrapper. Contains page content -->
<!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1 class="m-0"><?= $page_title;?></h1>
          </div><!-- /.col -->
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
<!--              <li class="breadcrumb-item"><a href="#">Home</a></li>-->
<!--              <li class="breadcrumb-item active"><?= $page_title;?></li>-->
            </ol>
          </div><!-- /.col -->
        </div><!-- /.row -->
      </div><!-- /.container-fluid -->
    </div>

       <div class="container-fluid">

    <div class="">
        <div class="table-wrapper">
              <div class="col-12 ">
<!--                <a href="{%  url 'add_banner' %}"><button class="btn btn-success btn-sm"><i class="fa fa-plus"></i> Add  </button></a>-->

              </div>
            <div class="table-title">
                <div class="row">
                    <div class="col-sm-8"><h2>Influencer's Wallet Management<b> Table</b></h2></div>

                </div>
            </div>
 <br><br>
   {% if messages %}
  <div class="container mt-3" style="text-align:center;background-color:red;">
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
        {{ message }}
<!--        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>-->
      </div>
    {% endfor %}
  </div>
{% endif %}<br>
           <table id="example1" class="table table-striped table-hover table-bordered">
       <thead class="">
      <tr>
        <th>#</th>
        <th >Name</th>
        <th>Phone</th>
        <th style="width:3cm;">Current Wallet Balance</th>
        <th>Requested Amount</th>
        <th style="width:6cm;">Bank Address</th>
        <th>Status</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody>
      {% if withdraws %}
        {% for req in withdraws %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ req.user.name }}</td>
            <td>{{ req.user.phone }}</td>
            <td style="width:3cm;">₹{{ req.user.wallet }}</td>
            <td>₹{{ req.amount }}</td>
            <td style="width:6cm;">{{ req.bank_address }}</td>
          <td>
  {% if req.status == "PENDING" %}
    <a href="{% url 'approve_withdrawal' req.id %}" class="btn btn-success btn-sm me-2">
      Approve
    </a>
    <a href="{% url 'reject_withdrawal' req.id %}" class="btn btn-danger btn-sm">
      Reject
    </a>
  {% elif req.status == "APPROVED" %}
    <span class="badge bg-success btn btn-lg">Approved</span>
  {% elif req.status == "REJECTED" %}
    <span class="badge bg-danger btn btn-lg">Rejected</span>
  {% else %}
    <span class="badge bg-secondary btn btn-lg">{{ req.status }}</span>
  {% endif %}
</td>

            <td>{{ req.created_at|date:"d M Y, h:i A" }}</td>
          </tr>
        {% endfor %}
      {% else %}
        <tr>
          <td colspan="5" class="text-center">No withdrawal requests found.</td>
        </tr>
      {% endif %}
    </tbody>
</table>


        </div>
    </div>
</div>
    <!-- /.content-header -->

    <!-- Main content -->

      <!-- /.content -->
  </div>
{% include 'backend/footer.html' %}

  <!-- /.navbar -->

